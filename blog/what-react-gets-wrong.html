<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><style>body>*,header span,img{margin:0 auto}@font-face{font-family:Oswald;font-style:normal;font-weight:400;src:local("Oswald Regular"),local("Oswald-Regular"),url(/oswald.woff) format("woff")}h1,h2,h3,h4,h5,h6,header{font-family:Oswald,sans-serif;padding-top:38px;color:#3b447c;line-height:1.2em;text-align:center}img{max-width:100%;height:auto;display:block}h1{opacity:.8;font-size:1.6em}body,html{margin:0;padding:0}body{font:19px Georgia,serif;color:#333;-webkit-font-smoothing:antialiased}body>*{max-width:740px;box-sizing:border-box;padding-left:19px;padding-right:19px}p{line-height:1.4em;padding-top:1em;margin-top:0;margin-bottom:0}article p:first-child{font-size:1.4em;line-height:1.4em;padding-bottom:.2em}header{background:#6672B7;color:#FFF;padding:1.6em .4em;font-size:2.4em;line-height:1.2em;text-align:center;max-width:100%;font-weight:400}header span{max-width:640px;display:block;text-shadow:0 3px 0 rgba(0,0,0,.2)}header small{display:block;font-size:.43em;font-family:Georgia,serif;text-shadow:0 2px 0 rgba(0,0,0,.2)}header img{border-radius:50%;vertical-align:middle;width:40px;height:40px}code,pre{overflow-x:auto;max-width:100%}a{color:#6672B7}a:visited{color:tint(#6672B7,20%)}section nav{font-size:1.4em;line-height:1.4em}</style><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="/favicon.ico"><title>What React gets wrong</title><meta name="description" content="React is the de-facto tool for web development, but what does it get wrong what would a frontend rendering library created in 2021 look like?"><link rel="manifest" href="/manifest.webmanifest"></head><body><header><span>What React gets wrong</span> <small>A blog post by Jesse Luoto</small></header><main><article><p>React is the de-facto tool for frontend web development. It has a rich ecosystem and a well-known company to back it up. Despite all of this, I think they still get a ton of stuff wrong. This post is about my personal views and things I think React is already a too slow-moving giant to fix.</p><h2 id="the-syntax">The syntax</h2><p>React has such an awful API that they needed to create a whole new programming language syntax to overcome it: The <code>React.createElement</code> API. Most of the time it&#39;s hidden behind JSX that&#39;s transpiled onto <code>React.createElement</code> calls.</p><p>You either only ever write JSX when working with React, or you get frustrated with the amount of clutter that gets to your codebase from all that repetition that provides no value to the reader.</p><pre><code class="lang-javascript">Reat.createElement(<span class="hljs-string">&#x27;html&#x27;</span>, <span class="hljs-literal">null</span>,
  React.createElement(<span class="hljs-string">&#x27;body&#x27;</span>, <span class="hljs-literal">null</span>,
    React.createElement(<span class="hljs-string">&#x27;div&#x27;</span>, <span class="hljs-literal">null</span>,
      React.createElement(...)
    )
  )
)
</code></pre><p>I think a much better way is to follow what SwiftUI and Flutter are doing: Move the element&#39;s name from argument to be the function&#39;s name:</p><pre><code class="lang-javascript">html(
  body(
    div(...)
  )
)
</code></pre><p>This does not only remove unnecessary clutter, but removes the need for any compilation step.</p><h2 id="create-react-app">create-react-app</h2><p>Next up us a monstrosity that&#39;s nowadays accepted by many to be a &quot;best practice&quot; for getting started with a React project. The problem being, that React ecosystem is such a complex beast that they created a bootstrap project so you can get anything done in a meaningful time. Just pray that you don&#39;t need to eject it any time soon.</p><p>Just to give you an idea of the absurdness of this situation: create-react-app creates a &quot;hello world&quot; project for you that downloads <strong>2.5 million lines of Javascript code</strong> to your machine. For a hello world app.</p><p><noscript class="lazyloadimage"><img src="/images/empty-create-react-app.png" alt="Screenshot of scc ran on empty create-react-app, which shows 2.5 million lines of Javascript code and estimated cost of $100000000"></noscript></p><p>I have strong feelings about fighting complexity by adding more complexity, and this sure smells like something you should not be doing in 2021.</p><p>Instead we should be thinking about where our browsers and server ecosystems are nowadays and if we could make the bootstrapping <em>simpler</em>. Browsers <a href="https://caniuse.com/es6-module">know how to handle imports nowadays</a>, and the module format is <a href="https://nodejs.org/api/esm.html">also part of Node.js</a> without any preprocessing, so you don&#39;t necessarily need a build step to get those working.</p><p>Modern browsers are really good with on-the-fly compression like gzip <a href="https://caniuse.com/brotli">and even brotli</a>, so minification is not so much of an issue. Your CDN should anyways be optimizing compression of your static assets.</p><p>Another point being that React is over 100kb when minified (including React DOM because you can&#39;t do that much without it). Imagine how much unminified code you could fit in 100kb if you used something that doesn&#39;t need to be built at all.</p><h2 id="react-is-not-just-a-view-rendering-library-anymore">React is not just a view rendering library anymore</h2><p>React used to be only a good frontend rendering library with JSX. Nowadays you&#39;re signing up for a framework with its own plugin ecosystem, hooks, fibers, suspense, and other obscure future features like <a href="https://reactjs.org/blog/2020/12/21/data-fetching-with-react-server-components.html">server components</a>.</p><p>We&#39;ve changed from doing <em>model-view-controller</em> to using all-consuming views that perform both business logic and create side effects. Views have become the top-level entity that controls everything else.</p><p>Remember the old saying &quot;UI is a function of state&quot;? React used to be a good implementation of this, but nowadays it&#39;s more of &quot;UI that handles your state&quot;.</p><p>I think a good view rendering library should do just one thing well: Render the UI based on the app&#39;s state. It should not care where the state is, and most importantly it should not handle the state itself. Otherwise we&#39;ll end up with things like bloated class components or <em>&quot;suddenly global state and black magic is fine&quot;</em> type of hooks inside otherwise pure functions.</p><p>Instead you should be handling your business logic, side effects and data gathering some place else, and use proper separation of concerns to model your application&#39;s logic.</p><h2 id="imagine-a-better-world">Imagine a better world</h2><p>So how would a better React alternative look in 2021? I made a small prototype library called <a href="https://www.npmjs.com/package/longwood">Longwood</a> based on above principles, and a hello world looks like this:</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="javascript">
      <span class="hljs-keyword">import</span> { div, text } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;https://cdn.skypack.dev/longwood&#x27;</span>

      <span class="hljs-keyword">const</span> render = div(text(<span class="hljs-string">&#x27;Hello world!&#x27;</span>))
      render(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;app&#x27;</span>))
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><p><a href="https://codesandbox.io/s/unruffled-star-xs16e?file=/index.html">▶️ Try it out at CodeSandbox.io</a></p><p>That&#39;s all the code you need. No precompilation, no build steps, no downloading of 2.5 million lines of code to get started. You can open a text editor, save the code as an <code>index.html</code> file, open it in a browser and it works.</p><p>You have the same power of Javascript to compose your views as with React, and there&#39;s a <a href="https://www.npmjs.com/package/longwood-usestate">separate state management library</a> to get started if you&#39;re coming from React. But moreover <em>it&#39;s okay to handle your state however you want</em>. It&#39;s just a rendering library. It can be used for just a small portion of your site if you want. It even supports server-side rendering out of the box (with jsdom).</p><p>Since you&#39;re going to ask, here are a couple of examples:</p><ul><li><a href="https://codesandbox.io/s/competent-swartz-beoub?file=/src/TodoComponent.ts">React style Todo app</a></li><li><a href="https://links.thejunkland.com/">Rendering 1000+ rows of data with Longwood</a><ul><li><a href="https://links.thejunkland.com/react/">Same example done with create-react-app</a></li></ul></li></ul><h2 id="to-wrap-up">To wrap up</h2><p>We’ve come a long way since the web 2.0 times. jQuery made the world a better place by making DOM manipulation easier. AngularJS made the world a better place by introducing data binding to the masses. But all great increments seem to fade at some point to welcome better alternatives.</p><p>Will the future be bright for Longwood? I have no idea, it’s a single-person project and at the moment has one production site running on it. But I hope it demonstrates a point that we can do things even better in the future if we keep innovating and cherry-picking the good stuff from others.</p><p>Happy hacking.</p><p><a href="https://twitter.com/intent/tweet?text=%22What%20React%20gets%20wrong%22%20by%20@luotojesse%20https://thejunkland.com/blog/what-react-gets-wrong.html" class="twittershare" target="_blank" rel="noopener">Tweet</a></p><form action="https://script.google.com/macros/s/AKfycbxRbnrX_4N2LPp7P2DIYuVA9BqnZeJPKHZaNedhjakItb9Rxm83/exec" method="POST"><h3>Be the first to know from new&nbsp;blog&nbsp;posts</h3><p>Subscribe to the mailing list to get priority access to new blog posts!</p><div><input type="email" name="email" placeholder="Your email address" aria-label="Your email address"></div><button type="submit">Subscribe!</button></form></article></main><footer><p>This site was made with &#9825; by Jesse Luoto.</p><p>Header font is <a href="https://www.google.com/fonts/specimen/Oswald">Oswald Regular</a> from Google Fonts</p><nav><a href="/index.html">Blog</a> <a href="/about.html">About</a></nav></footer><script src="/scripts.bd620f8c.js" async></script></body></html>